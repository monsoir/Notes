# ä½¿ç”¨ JavaScript å®ç°ç¬›å¡å°”ç§¯è®¡ç®—

## ç¬›å¡å°”ç§¯

ç”±ä¸¤ä¸ªæˆ–å¤šä¸ªé›†åˆä¸­çš„å…ƒç´ ï¼Œç›¸äº’ç»„åˆçš„å‡ºæ¥çš„å¦ä¸€ä¸ªå¤§çš„é›†åˆ

ä¾‹å¦‚æ‰‘å…‹ç‰Œï¼Œå®é™…ä¸Šæ˜¯ç”±ä¸¤ä¸ªé›†åˆä¸­çš„å…ƒç´ ç»„æˆçš„

- [A, 2, 3, 4, 5, 6, 7, ,8 ,9, 10, J, Q, K] ä¸€å…± 13 ä¸ª
- [â™ , â™¥, â™¦, â™£] ä¸€å…± 4 ä¸ª

ç”±ä¸Šé¢ä¸¤ä¸ªå…ƒç´ ä¸¤ä¸¤ç»„åˆï¼Œå¾—å‡ºäº†

- [â™ A, â™ 2, â™ 3, â™ 4, ...]
- [â™¥A, â™¥2, â™¥3, â™¥4, ...]
- [â™¦A, â™¦2, â™¦3, â™¦4, ...]
- [â™£A, â™£2, â™£3, â™£4, ...]

ä¸€å…±æœ‰ 13 â€¢ 4 = 52 ä¸ªå…ƒç´ 

## å®é™…è¿ç”¨

åœ¨å•†ç”¨é¢†åŸŸä¸Šï¼Œä½¿ç”¨åˆ°ç¬›å¡å°”ç§¯çš„ï¼Œå°±æ˜¯æ ¹æ®å•†å“è§„æ ¼ï¼Œè®¡ç®—å‡ºå•†å“çš„ç»„åˆï¼Œä¾‹å¦‚ï¼Œç»™å‡ºä¸‹åˆ—çš„è§„æ ¼

```js
const data = {
  color: ['é»‘è‰²', 'ç™½è‰²', 'é‡‘è‰²'], // é¢œè‰²
  storage: ['64', '128', '256', '512'], // å­˜å‚¨ç©ºé—´
  size: ['5.5', '6.5', '7.5'], // å±å¹•å¤§å°
  brand: ['Apple', 'Huawei', 'Mi', 'vivo'], // å“ç‰Œ
};
```

æˆ‘ä»¬éœ€è¦å¾—å‡ºå¦‚ä¸‹çš„æ•°æ®ç»“æ„

```js
const result = [
  {
    color: '',
    storage: '',
    size: '',
    brand: '',
  },
  {
    color: '',
    storage: '',
    size: '',
    brand: '',
  },
  // ...
];
```

## å®ç°

é¦–å…ˆï¼Œå…ˆè®¡ç®—ä¸¤ä¸ªé›†åˆçš„æƒ…å†µ

```js
const d = {
  color: ['é»‘è‰²', 'ç™½è‰²', 'é‡‘è‰²'],
  storage: ['64', '128', '256', '512'],
};

function cartesianTwo(dataSet) {
  const entries = Object.entries(dataSet);
  
  // entries:
  // [
  //   ['color', ['é»‘è‰²', 'ç™½è‰²', 'é‡‘è‰²']]
  //   ['storage', ['64', '128', '256', '512' ]]
  // ]

  const a = entries[0]; // ['color', ['é»‘è‰²', 'ç™½è‰²', 'é‡‘è‰²']]
  const b = entries[1]; // ['storage', ['64', '128', '256', '512' ]]

  const aKey = a[0]; // 'color'
  const aValue = a[1]; // 'storage'

  const bKey = b[0]; // ['é»‘è‰²', 'ç™½è‰²', 'é‡‘è‰²']
  const bValue = b[1]; // ['64', '128', '256', '512' ]

  // ä¸‹é¢å°±æ˜¯æ ¸å¿ƒçš„ç®—æ³•
  const products = [];

  Object.keys(aValue).forEach((aIndex) => {
    Object.keys(bValue).forEach((bIndex) => {
      // ä½¿ç”¨ä¸¤å±‚å¾ªç¯ï¼Œæ ¹æ® a, b çš„å€¼ä¸æ–­ç”Ÿæˆæ–°çš„ç»„åˆ
      products.push({
        [aKey]: aValue[aIndex],
        [bKey]: bValue[bIndex],
      });
    });
  });

  return products;
}
```

é€šè¿‡ä¸Šé¢çš„ç®—æ³•ï¼Œå¯ä»¥è®¡ç®—å‡ºä¸¤ä¸ªç»„åˆçš„ç¬›å¡å°”ç§¯ï¼Œä½†å¦‚æœæœ‰æ›´å¤šçš„é›†åˆå‘¢ï¼Ÿ

æ¨¡æ‹Ÿä¸€ä¸‹æ‰‹åŠ¨è®¡ç®—ç¬›å¡å°”ç§¯çš„è¿‡ç¨‹ï¼Œå¯ä»¥å‘ç°ï¼Œå®é™…ä¸Šæ¯æ¬¡çš„è®¡ç®—éƒ½æ˜¯ä¸¤ä¸ªé›†åˆä¹‹é—´çš„è®¡ç®—

- ä¸€ä¸ªæ–°çš„é›†åˆ + ä¸€ä¸ªç©ºçš„é›†åˆï¼ˆå ä½ï¼‰
    - ç¬¬ä¸€è½®è®¡ç®—ï¼Œä½†äººå·¥æ‰‹åŠ¨è®¡ç®—çš„æ—¶å€™ï¼Œå¾€å¾€åœ¨æ½œæ„è¯†å·²ç»å¿½ç•¥äº†
- ä¸€ä¸ªæ–°çš„é›†åˆ + å‰å‡ ä¸ªé›†åˆçš„ç¬›å¡å°”ç§¯çš„é›†åˆ

å› æ­¤ï¼Œå°†ä¼šæœ‰ä¸€ä¸ªè®¡ç®—ä¸¤ä¸ªé›†åˆçš„ç¬›å¡å°”ç§¯çš„å‡½æ•°ï¼Œå‘½åä¸º `cartesianProduct`, åŒæ—¶ï¼Œå°†ä¼šæœ‰ä¸¤ä¸€ä¸ªå‡½æ•° `cartesian` ç”¨ä½œè®¡ç®—æŸä¸€æ•´ä¸ªæ•°æ®é›†çš„ç¬›å¡å°”ç§¯çš„å…¥å£

ğŸ‘‡ å‡½æ•° `cartesian`

```js
function cartesian(input) {
  const entries = Object.entries(input || {});

  let products = [];
  entries.forEach((entry) => {
    products = cartesianProduct(entry, products);
  });

  return products;
}
```

- ä½¿ç”¨ `Object.entries()` æ¥å°†æ•°æ®é›†åŒ–ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œä»¥ä¾¿éå†
- åœ¨å¾ªç¯ä½“ä¸­ï¼Œæˆ‘ä»¬ä¸æ–­å–å‡ºå½“å‰éå†çš„å…ƒç´ ï¼Œå³æ–°é›†åˆï¼›åŒæ—¶å°†å·²ç»è®¡ç®—å¥½çš„ç¬›å¡å°”ç§¯çš„æ•°ç»„ä¼ å…¥ï¼Œä¸æ–°é›†åˆä¸€åŒè®¡ç®—
- `products` æ¯æ¬¡éƒ½è¦æŒ‡å‘æ–°çš„æ•°ç»„ï¼Œå› ä¸ºè¦ä» `cartesianProduct` è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„æ•°ç»„

ğŸ‘‡ å‡½æ•° `cartesianProduct`

```js
function cartesianProduct(a, currentProducts) {

  const aKey = a[0];
  const aValue = a[1];
  const _currentProducts = currentProducts || [];

  // 1.
  if (Object.keys(_currentProducts).length <= 0) {
    return aValue.map(value => ({
      [aKey]: value,
    }));
  }

  const products = [];
  
  Object.keys(aValue).forEach((key) => {
    _currentProducts.forEach((product) => {
      // 2.
      products.push({
        ...product,
        [aKey]: aValue[key],
      });
    })
  });

  return products;
}
```

1. æˆ‘ä»¬æ·»å¢ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœ `currentProducts` ä¸ºç©ºï¼Œåˆ™è¡¨æ˜å½“å‰æ˜¯ç¬¬ä¸€è½®è®¡ç®—ï¼Œç›´æ¥è¿”å›é›†åˆè½¬æ¢ä¸€ä¸‹æ•°æ®ç»“æ„åè¿”å›
    - è½¬æ¢æ•°æ®ç»“æ„ï¼Œå³ï¼šæœ¬æ¥æ•°æ®é›†æ˜¯ä»¥æ•°ç»„å½¢å¼ï¼Œå…ƒç´ ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜åœ¨çš„ï¼Œä½†æˆ‘ä»¬æœ€åè¦çš„ç»“æœæ˜¯ä»¥æ•°ç»„å½¢å¼ï¼Œå…ƒç´ ä»¥å¯¹è±¡å½¢å¼å­˜åœ¨çš„
2. åœ¨æ ¸å¿ƒç®—æ³•è¿™é‡Œï¼Œæˆ‘ä»¬æ”¹å˜äº†ä¸€ä¸‹æ¨å…¥æ•°ç»„ä¸­çš„å…ƒç´ çš„ç¼–ç æ–¹å¼
    - éœ€è¦æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å½“å‰å†…å¾ªç¯ï¼Œå³å·²ç»è®¡ç®—å¥½ç¬›å¡å°”ç§¯çš„éƒ¨åˆ†ï¼Œå¤åˆ¶åˆ°æ–°å¯¹è±¡ï¼Œéšåå°†æ–°çš„å±æ€§æ·»åŠ åˆ°æ–°å¯¹è±¡ä¸­
    - è¿™é‡Œå¿…é¡»æ˜¯ä½¿ç”¨éœ€è¦æ–°çš„å¯¹è±¡ï¼Œå¦åˆ™ä¸æ–­å¾€åè®¡ç®—çš„ç¬›å¡å°”ç§¯æ—¶ï¼Œæ–°å±æ€§å¾—åˆ°çš„ï¼Œå§‹ç»ˆæ˜¯æ–°é›†åˆä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œå› ä¸º `currentProducts` ä¸­çš„å€¼ä¼šä¸æ–­åœ°ç”¨åˆ°ï¼Œå¦‚æœåƒä¸‹é¢ä¸€æ ·ä¸€ç›´åƒå†…å¾ªç¯ä¸­çš„ `product` ä¸­ç›´æ¥æ·»åŠ å±æ€§ï¼Œåªä¼šå¯¼è‡´ä¸æ–­ä¿®æ”¹åŒä¸€ä¸ªå¯¹è±¡

    ```js
    // âŒ é”™è¯¯
    Object.keys(aValue).forEach((key) => {
      _currentProducts.forEach((product) => {
        product[aKey] = aValue[key];
        products.push(product);
      })
    });
    ```


